˙I
MC:\Users\VishnuPadiga\Desktop\EventManager\API\Controllers\EventController.cs
	namespace 	

Controller
 
{		 
[

 
Route

 
(

 	
$str

	 
)

 
]

 
public 
class	 
EventController 
:  
ControllerBase! /
{ 
private 
readonly 
IEventService "
_eventService# 0
;0 1
private 
static 
readonly 
Logger "
_logger# *
=+ ,

LogManager- 7
.7 8!
GetCurrentClassLogger8 M
(M N
)N O
;O P
public 

EventController 
( 
IEventService (
eventService) 5
)5 6
{ 
_eventService 
= 
eventService "
;" #
} 
[ 
HttpPost 
] 
[ 
SwaggerResponse 
( 
$num 
, 
$str /
,/ 0
typeof1 7
(7 8
IdDto8 =
)= >
)> ?
]? @
[ 
SwaggerResponse 
( 
$num 
, 
$str '
,' (
typeof) /
(/ 0
CustomException0 ?
)? @
)@ A
]A B
[ 
SwaggerResponse 
( 
$num 
, 
$str 1
)1 2
]2 3
public 

IActionResult 
CreateEvent $
($ %
[% &
FromBody& .
]. /
EventDto0 8
eventDto9 A
)A B
{ 
if 
(	 

!
 

ModelState 
. 
IsValid 
) 
{   
_logger!! 
.!! 
Error!! 
(!! 
$str!! 7
)!!7 8
;!!8 9
throw"" 
new"" 
CustomException"" !
(""! "
$num""" %
,""% &
$str""' 4
,""4 5
$str""6 K
)""K L
;""L M
}## 
_logger$$ 
.$$ 
Info$$ 
($$ 
$str$$ B
,$$B C
eventDto$$D L
.$$L M
	EventName$$M V
)$$V W
;$$W X
IdDto&& 
eventId&& 
=&& 
_eventService&& #
.&&# $
CreateEvent&&$ /
(&&/ 0
eventDto&&0 8
)&&8 9
;&&9 :
_logger(( 
.(( 
Info(( 
((( 
$str(( >
,((> ?
eventId((@ G
.((G H
Id((H J
)((J K
;((K L
return** 
Ok** 
(** 
eventId** 
)** 
;** 
}++ 
[.. 
HttpGet.. 
(.. 
$str.. 
).. 
].. 
[44 
SwaggerResponse44 
(44 
$num44 
,44 
$str44 7
,447 8
typeof449 ?
(44? @
EventDto44@ H
)44H I
)44I J
]44J K
[55 
SwaggerResponse55 
(55 
$num55 
,55 
$str55 '
,55' (
typeof55) /
(55/ 0
CustomException550 ?
)55? @
)55@ A
]55A B
[66 
SwaggerResponse66 
(66 
$num66 
,66 
$str66 1
)661 2
]662 3
public77 

IActionResult77 
	GetEvents77 "
(77" #
[77# $
	FromRoute77$ -
(77- .
Name77. 2
=773 4
$str775 @
)77@ A
,77A B
Required77C K
]77K L
string77M S
eventKey77T \
,77\ ]
[77^ _
	FromQuery77_ h
(77h i
Name77i m
=77n o
$str77p }
)77} ~
]77~ 
int
77Ä É

startIndex
77Ñ é
=
77è ê
$num
77ë í
,
77í ì
[
77î ï
	FromQuery
77ï û
(
77û ü
Name
77ü £
=
77§ •
$str
77¶ ∞
)
77∞ ±
]
77± ≤
int
77≥ ∂
rowSize
77∑ æ
=
77ø ¿
$num
77¡ ¬
)
77¬ √
{88 
_logger99 
.99 
Info99 
(99 
$str99 7
,997 8
eventKey999 A
)99A B
;99B C
List;; 

<;;
 

EventIdDto;; 
>;; 
eventIdDtos;; "
=;;# $
_eventService;;% 2
.;;2 3
	GetEvents;;3 <
(;;< =
eventKey;;= E
,;;E F

startIndex;;G Q
,;;Q R
rowSize;;S Z
);;Z [
;;;[ \
_logger== 
.== 
Info== 
(== 
$str== ?
,==? @
eventIdDtos==A L
)==L M
;==M N
return?? 
Ok?? 
(?? 
eventIdDtos?? 
)?? 
;?? 
}@@ 
[CC 
HttpPostCC 
(CC 
$strCC  
)CC  !
]CC! "
[LL 
SwaggerResponseLL 
(LL 
$numLL 
,LL 
$strLL /
,LL/ 0
typeofLL1 7
(LL7 8
ListLL8 <
<LL< =
UserDtoLL= D
>LLD E
)LLE F
)LLF G
]LLG H
[MM 
SwaggerResponseMM 
(MM 
$numMM 
,MM 
$strMM '
,MM' (
typeofMM) /
(MM/ 0
CustomExceptionMM0 ?
)MM? @
)MM@ A
]MMA B
[NN 
SwaggerResponseNN 
(NN 
$numNN 
,NN 
$strNN +
,NN+ ,
typeofNN- 3
(NN3 4
CustomExceptionNN4 C
)NNC D
)NND E
]NNE F
[OO 
SwaggerResponseOO 
(OO 
$numOO 
,OO 
$strOO 1
,OO1 2
typeofOO3 9
(OO9 :
CustomExceptionOO: I
)OOI J
)OOJ K
]OOK L
publicPP 

IActionResultPP 
CreateAttendeePP '
(PP' (
[PP( )
	FromRoutePP) 2
(PP2 3
NamePP3 7
=PP8 9
$strPP: D
)PPD E
,PPE F
RequiredPPG O
]PPO P
GuidPPQ U
eventIdPPV ]
,PP] ^
[PP_ `
FromFormPP` h
(PPh i
NamePPi m
=PPn o
$strPPp v
)PPv w
,PPw x
Required	PPy Å
]
PPÅ Ç
	IFormFile
PPÉ å
file
PPç ë
)
PPë í
{QQ 
_loggerRR 
.RR 
InfoRR 
(RR 
$strRR E
,RRE F
fileRRG K
,RRK L
eventIdRRM T
)RRT U
;RRU V
ListTT 

<TT
 
UserDtoTT 
>TT 
conflictedUsersTT #
=TT$ %
_eventServiceTT& 3
.TT3 4
CreateAttendeeTT4 B
(TTB C
eventIdTTC J
,TTJ K
fileTTL P
)TTP Q
;TTQ R
_loggerVV 
.VV 
InfoVV 
(VV 
$strVV \
,VV\ ]
fileVV^ b
,VVb c
eventIdVVd k
,VVk l
conflictedUsersVVm |
)VV| }
;VV} ~
ifWW 
(WW	 

conflictedUsersWW
 
.WW 
CountWW 
!=WW  "
$numWW# $
)WW$ %
{XX 
returnYY 
ConflictYY 
(YY 
conflictedUsersYY '
)YY' (
;YY( )
}ZZ 
return[[ 
Ok[[ 
([[ 
)[[ 
;[[ 
}\\ 
[__ 
HttpGet__ 
(__ 
$str__ 
)__  
]__  !
[ee 
SwaggerResponseee 
(ee 
$numee 
,ee 
$stree :
,ee: ;
typeofee< B
(eeB C
UserDtoeeC J
)eeJ K
)eeK L
]eeL M
[ff 
SwaggerResponseff 
(ff 
$numff 
,ff 
$strff 1
)ff1 2
]ff2 3
publicgg 

IActionResultgg 
GetUsersForEventgg )
(gg) *
[gg* +
	FromRoutegg+ 4
(gg4 5
Namegg5 9
=gg: ;
$strgg< F
)ggF G
,ggG H
RequiredggI Q
]ggQ R
GuidggS W
eventIdggX _
)gg_ `
{hh 
_loggerii 
.ii 
Infoii 
(ii 
$strii <
,ii< =
eventIdii> E
)iiE F
;iiF G
Listkk 

<kk
 
UserDtokk 
>kk 
userskk 
=kk 
_eventServicekk )
.kk) *
GetUsersForEventkk* :
(kk: ;
eventIdkk; B
)kkB C
;kkC D
_loggermm 
.mm 
Infomm 
(mm 
$strmm I
,mmI J
usersmmK P
,mmP Q
eventIdmmR Y
)mmY Z
;mmZ [
returnoo 
Okoo 
(oo 
usersoo 
)oo 
;oo 
}qq 
}ss 
}tt ø6
LC:\Users\VishnuPadiga\Desktop\EventManager\API\Controllers\UserController.cs
	namespace 	

Controller
 
{ 
[		 
Route		 
(		 	
$str			 
)		 
]		 
public

 
class

	 
UserController

 
:

 
ControllerBase

  .
{ 
private 
readonly 
IUserService !
_userService" .
;. /
private 
static 
readonly 
Logger "
_logger# *
=+ ,

LogManager- 7
.7 8!
GetCurrentClassLogger8 M
(M N
)N O
;O P
public 

UserController 
( 
IUserService &
userService' 2
)2 3
{ 
_userService 
= 
userService  
;  !
} 
[ 
HttpPost 
] 
[ 
SwaggerResponse 
( 
$num 
, 
$str /
)/ 0
]0 1
[ 
SwaggerResponse 
( 
$num 
, 
$str '
,' (
typeof) /
(/ 0
CustomException0 ?
)? @
)@ A
]A B
[ 
SwaggerResponse 
( 
$num 
, 
$str 1
)1 2
]2 3
public 

IActionResult 

UploadUser #
(# $
[$ %
FromForm% -
(- .
Name. 2
=3 4
$str5 ;
); <
]< =
	IFormFile> G
fileH L
)L M
{ 
_logger 
. 
Info 
( 
$str 1
,1 2
file3 7
)7 8
;8 9
bool 

upload 
= 
_userService  
.  !

UploadUser! +
(+ ,
file, 0
)0 1
;1 2
_logger!! 
.!! 
Info!! 
(!! 
$str!! :
,!!: ;
file!!< @
)!!@ A
;!!A B
return## 
Ok## 
(## 
)## 
;## 
}$$ 
[&& 
HttpGet&& 
]&& 
[-- 
SwaggerResponse-- 
(-- 
$num-- 
,-- 
$str-- (
,--( )
typeof--* 0
(--0 1
List--1 5
<--5 6
UserDto--6 =
>--= >
)--> ?
)--? @
]--@ A
[.. 
SwaggerResponse.. 
(.. 
$num.. 
,.. 
$str.. 1
)..1 2
]..2 3
public// 

IActionResult// 
GetAllUsers// $
(//$ %
[//% &
	FromQuery//& /
(/// 0
Name//0 4
=//5 6
$str//7 D
)//D E
]//E F
int//G J

startIndex//K U
=//V W
$num//X Y
,//Y Z
[//[ \
	FromQuery//\ e
(//e f
Name//f j
=//k l
$str//m w
)//w x
]//x y
int//z }
rowSize	//~ Ö
=
//Ü á
$num
//à â
)
//â ä
{00 
_logger11 
.11 
Info11 
(11 
$str11 F
)11F G
;11G H
List33 

<33
 
UserDto33 
>33 
users33 
=33 
_userService33 (
.33( )
GetAllUsers33) 4
(334 5

startIndex335 ?
,33? @
rowSize33A H
)33H I
;33I J
_logger55 
.55 
Info55 
(55 
$str55 ;
,55; <
users55= B
)55B C
;55C D
return77 
Ok77 
(77 
users77 
)77 
;77 
}88 
[;; 
HttpGet;; 
(;; 
$str;; 
);; 
];; 
[AA 
SwaggerResponseAA 
(AA 
$numAA 
,AA 
$strAA =
,AA= >
typeofAA? E
(AAE F
UserDtoAAF M
)AAM N
)AAN O
]AAO P
[BB 
SwaggerResponseBB 
(BB 
$numBB 
,BB 
$strBB 1
)BB1 2
]BB2 3
publicCC 

IActionResultCC 
GetUserByIdCC $
(CC$ %
[CC% &
	FromRouteCC& /
(CC/ 0
NameCC0 4
=CC5 6
$strCC7 @
)CC@ A
]CCA B
intCCC F
userIdCCG M
)CCM N
{DD 
_loggerEE 
.EE 
InfoEE 
(EE 
$strEE 4
,EE4 5
userIdEE6 <
)EE< =
;EE= >
UserDtoGG 
userGG 
=GG 
_userServiceGG !
.GG! "
GetUserByIdGG" -
(GG- .
userIdGG. 4
)GG4 5
;GG5 6
_loggerII 
.II 
InfoII 
(II 
$strII I
,III J
userIIK O
,IIO P
userIdIIQ W
)IIW X
;IIX Y
returnKK 
OkKK 
(KK 
userKK 
)KK 
;KK 
}LL 
[OO 
HttpGetOO 
(OO 
$strOO 
)OO  
]OO  !
[UU 
SwaggerResponseUU 
(UU 
$numUU 
,UU 
$strUU ?
,UU? @
typeofUUA G
(UUG H
ListUUH L
<UUL M
EventDtoUUM U
>UUU V
)UUV W
)UUW X
]UUX Y
[VV 
SwaggerResponseVV 
(VV 
$numVV 
,VV 
$strVV 1
)VV1 2
]VV2 3
publicWW 

IActionResultWW 
GetEventsForUserWW )
(WW) *
[WW* +
	FromRouteWW+ 4
(WW4 5
NameWW5 9
=WW: ;
$strWW< E
)WWE F
]WWF G
intWWH K
userIdWWL R
)WWR S
{XX 
_loggerYY 
.YY 
InfoYY 
(YY 
$strYY <
,YY< =
userIdYY> D
)YYD E
;YYE F
List[[ 

<[[
 

EventIdDto[[ 
>[[ 
events[[ 
=[[ 
_userService[[  ,
.[[, -
GetEventsForUser[[- =
([[= >
userId[[> D
)[[D E
;[[E F
_logger]] 
.]] 
Info]] 
(]] 
$str]] M
,]]M N
events]]O U
,]]U V
userId]]W ]
)]]] ^
;]]^ _
return^^ 
Ok^^ 
(^^ 
events^^ 
)^^ 
;^^ 
}__ 
}`` 
}aa †

9C:\Users\VishnuPadiga\Desktop\EventManager\API\Program.cs
	namespace 	
API
 
{ 
public 
class	 
Program 
{ 
static 

void 
Main 
( 
string 
[ 
] 
args "
)" #
{ 
CreateHostBuilder 
( 
args 
) 
. 
Build #
(# $
)$ %
.% &
Run& )
() *
)* +
;+ ,
}		 
public

 

static

 
IHostBuilder

 
CreateHostBuilder

 0
(

0 1
string

1 7
[

7 8
]

8 9
args

: >
)

> ?
{ 
return 
Host 
.  
CreateDefaultBuilder &
(& '
args' +
)+ ,
.
 $
ConfigureWebHostDefaults #
(# $
WebHostBuilder$ 2
=>3 5
{
 
WebHostBuilder 
. 

UseStartup %
<% &
Startup& -
>- .
(. /
)/ 0
;0 1
}
 
) 
; 
} 
} 
} ®>
9C:\Users\VishnuPadiga\Desktop\EventManager\API\Startup.cs
	namespace		 	
API		
 
{

 
public 
class	 
Startup 
{ 
public 

IConfiguration 
Configuration '
{( )
get* -
;- .
}/ 0
public 

Startup 
( 
IConfiguration !
configuration" /
)/ 0
{ 
Configuration 
= 
configuration #
;# $
} 
public 

void 
ConfigureServices !
(! "
IServiceCollection" 4
services5 =
)= >
{ 
services 
. 
AddControllers 
( 
) 
;  
services 
. #
AddEndpointsApiExplorer &
(& '
)' (
;( )
services 
. 
AddSwaggerGen 
( 
) 
; 
services 
. 

AddLogging 
( 
loggingBuilder (
=>) +
{ 
loggingBuilder 
. 

AddConsole !
(! "
)" #
;# $
loggingBuilder 
. 
AddDebug 
(  
)  !
;! "
} 
) 
; 	
var 	
mapperConfig
 
= 
new 
MapperConfiguration 0
(0 1
cfg1 4
=>5 7
{ 
cfg   
.   

AddProfile   
(   
new   
AutoMapping   &
(  & '
)  ' (
)  ( )
;  ) *
}!! 
)!! 
;!! 	
IMapper"" 
mapper"" 
="" 
mapperConfig"" #
.""# $
CreateMapper""$ 0
(""0 1
)""1 2
;""2 3
services## 
.## 
AddSingleton## 
(## 
mapper## "
)##" #
;### $
var%% 	
config%%
 
=%% 
new%% 
MapperConfiguration%% *
(%%* +
cfg%%+ .
=>%%/ 1
{&& 
AutoMapping'' 
.'' 
	Configure'' 
('' 
cfg'' !
)''! "
;''" #
}(( 
)(( 
;(( 	
services)) 
.)) 
AddSingleton)) 
()) 
config)) "
.))" #
CreateMapper))# /
())/ 0
)))0 1
)))1 2
;))2 3
services,, 
.,, $
AddEntityFrameworkNpgsql,, '
(,,' (
),,( )
.-- 
AddDbContext-- 
<-- 
ApiDbContext--  
>--  !
(--! "
opt--" %
=>--& (
opt.. 
... 
	UseNpgsql.. 
(.. 
Configuration.. )
...) *
GetConnectionString..* =
(..= >
$str..> Q
)..Q R
,..R S
b..T U
=>..V X
b..Y Z
...Z [
MigrationsAssembly..[ m
(..m n
$str..n v
)..v w
)..w x
)..x y
;..y z

AppContext// 
.// 
	SetSwitch// 
(// 
$str// A
,//A B
true//C G
)//G H
;//H I
services11 
.11 
	AddScoped11 
<11 
UserController11 '
>11' (
(11( )
)11) *
;11* +
services22 
.22 
	AddScoped22 
<22 
IUserService22 %
,22% &
UserService22' 2
>222 3
(223 4
)224 5
;225 6
services33 
.33 
	AddScoped33 
<33 
IUserRepository33 (
,33( )
UserRepository33* 8
>338 9
(339 :
)33: ;
;33; <
services44 
.44 
	AddScoped44 
<44 
EventController44 (
>44( )
(44) *
)44* +
;44+ ,
services55 
.55 
	AddScoped55 
<55 
IEventService55 &
,55& '
EventService55( 4
>554 5
(555 6
)556 7
;557 8
services66 
.66 
	AddScoped66 
<66 
IEventRepository66 )
,66) *
EventRepository66+ :
>66: ;
(66; <
)66< =
;66= >
}77 
public88 

void88 
	Configure88 
(88 
IApplicationBuilder88 -
app88. 1
,881 2
IWebHostEnvironment883 F
env88G J
)88J K
{99 
if:: 
(::	 

env::
 
.:: 
IsDevelopment:: 
(:: 
):: 
):: 
{;; 
}== 
app?? 	
.??	 

UseExceptionHandler??
 
(?? 
appError?? &
=>??' )
{@@ 
appErrorAA 
.AA 
RunAA 
(AA 
asyncAA 
contextAA "
=>AA# %
{BB 	
varCC
 
contextFeatureCC 
=CC 
contextCC &
.CC& '
FeaturesCC' /
.CC/ 0
GetCC0 3
<CC3 4$
IExceptionHandlerFeatureCC4 L
>CCL M
(CCM N
)CCN O
;CCO P
ifDD
 
(DD 
contextFeatureDD 
!=DD 
nullDD  $
)DD$ %
{EE
 
contextFF 
.FF 
ResponseFF 
.FF 
ContentTypeFF (
=FF) *
$strFF+ =
;FF= >
CustomExceptionGG 
?GG 
baseExceptionGG *
=GG+ ,
(GG- .
CustomExceptionGG. =
)GG= >
contextFeatureGG> L
.GGL M
ErrorGGM R
;GGR S
contextHH 
.HH 
ResponseHH 
.HH 

StatusCodeHH '
=HH( )
baseExceptionHH* 7
.HH7 8
CodeHH8 <
;HH< =
awaitII 
contextII 
.II 
ResponseII "
.II" #

WriteAsyncII# -
(II- .
newII. 1
ErrorDtoII2 :
{JJ 
CodeKK 
=KK 
baseExceptionKK "
.KK" #
CodeKK# '
,KK' (
MessageLL 
=LL 
baseExceptionLL %
.LL% &
MessagesLL& .
,LL. /
DescriptionMM 
=MM 
baseExceptionMM )
.MM) *
DescriptionMM* 5
}NN 
.NN 
ToStringNN 
(NN 
)NN 
)NN 
;NN 
returnOO 
;OO 
}PP
 
}QQ 	
)QQ	 

;QQ
 
}RR 
)RR 
;RR 	
appTT 	
.TT	 


UseSwaggerTT
 
(TT 
)TT 
;TT 
appUU 	
.UU	 

UseSwaggerUIUU
 
(UU 
)UU 
;UU 
appVV 	
.VV	 

UseHttpsRedirectionVV
 
(VV 
)VV 
;VV  
appWW 	
.WW	 


UseRoutingWW
 
(WW 
)WW 
;WW 
appXX 	
.XX	 

UseAuthenticationXX
 
(XX 
)XX 
;XX 
appYY 	
.YY	 

UseAuthorizationYY
 
(YY 
)YY 
;YY 
appZZ 	
.ZZ	 

UseEndpointsZZ
 
(ZZ 
	endpointsZZ  
=>ZZ! #
{[[ 
	endpoints\\ 
.\\ 
MapControllers\\  
(\\  !
)\\! "
;\\" #
}]] 
)]] 
;]] 	
}^^ 
}__ 
}`` 